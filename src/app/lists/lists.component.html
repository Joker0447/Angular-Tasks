<div class="list-card">
  <div class="header-path">LEADS &nbsp;›&nbsp; New List</div>

  <div
    class="top-actions"
    style="
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    "
  >
    <button type="button" class="btn action-btn" (click)="onAddLead()">
      Add Lead
    </button>
    <button type="button" class="btn action-btn" (click)="onImport()">
      Import
    </button>
    <button type="button" class="btn action-btn" (click)="onCustomize()">
      Customize
    </button>
  </div>

  <h2 class="title">Create a New List</h2>

  <form (ngSubmit)="onSubmit()" #f="ngForm" class="form">
    <!-- Row: List name + checkboxes në të njëjtën vijë -->
    <div class="form-row">
      <label for="listName" class="form-label">
        List Name <span class="required">*</span>
      </label>

      <div class="form-controls">
        <input
          id="listName"
          name="listName"
          type="text"
          [(ngModel)]="listName"
          required
          class="txt"
        />

        <label class="inline-check">
          <input
            type="checkbox"
            [(ngModel)]="setAsDefault"
            name="setAsDefault"
          />
          <span>Set as Default</span>
        </label>

        <label class="inline-check">
          <input
            type="checkbox"
            [(ngModel)]="listInMetrics"
            name="listInMetrics"
          />
          <span>List in Metrics</span>
        </label>
      </div>
    </div>

    <!-- Choose columns -->
    <div class="form-block">
      <label class="block-label">
        Choose columns and order <span class="muted">(Max 15)</span>
      </label>

      <!-- Chips si në screenshot -->
      <div class="chips-row">
        <ng-container *ngFor="let col of selectedColumns">
          <span class="chip">
            {{ col }}
            <button
              type="button"
              class="chip-remove"
              (click)="onColumnChange(false, col)"
              aria-label="Remove column"
            >
              &times;
            </button>
          </span>
        </ng-container>
      </div>

      <!-- <div class="add-column-row">
        <select [(ngModel)]="columnToAdd" name="columnToAdd" class="select">
          <option [ngValue]="null">Select column</option>
          <option *ngFor="let col of availableColumns" [ngValue]="col">
            {{ col }}
          </option>
        </select>
        <button
          type="button"
          class="btn"
          (click)="addColumn()"
          [disabled]="selectedColumns.length >= 15 || !columnToAdd"
        >
          + Add Column
        </button>
      </div> -->

      <!-- (opsionale) Grid i fshehur vizualisht – e mbajmë për riorganizim në të ardhmen -->
      <ag-grid-angular
        class="ag-theme-alpine ag-hidden"
        [rowData]="rowData"
        [columnDefs]="columnDefs"
        [domLayout]="'autoHeight'"
        [suppressRowClickSelection]="true"
        [rowSelection]="'single'"
      >
      </ag-grid-angular>
    </div>

    <!-- Conditions panel si në screenshot -->
    <div class="form-block">
      <label class="block-label">Choose List conditions :</label>

      <div class="conditions">
        <div class="condition-box">
          <button
            type="button"
            class="add-condition-btn"
            (click)="addAllCondition()"
          >
            <span style="font-weight: bold; font-size: 1.2em; margin-right: 4px"
              >+</span
            >
            Add Condition
          </button>
          <div class="condition-items" *ngIf="allConditions.length">
            <div
              class="cond-item"
              *ngFor="let cond of allConditions; let i = index"
            >
              Condition {{ i + 1 }}
            </div>
          </div>
          <div class="condition-title">
            <strong>All Conditions</strong>&nbsp;
            <span class="note">(All of the conditions must be met)</span>
          </div>
        </div>
        <div class="condition-box">
          <div class="condition-title">
            <strong>Any Conditions</strong>&nbsp;
            <span class="note"
              >(At least one of the conditions must be met)</span
            >
          </div>
          <button
            type="button"
            class="add-condition-btn"
            (click)="addAnyCondition()"
          >
            <span style="font-weight: bold; font-size: 1.2em; margin-right: 4px"
              >+</span
            >
            Add Condition
          </button>
          <div class="condition-items" *ngIf="anyConditions.length">
            <div
              class="cond-item"
              *ngFor="let cond of anyConditions; let i = index"
            >
              Condition {{ i + 1 }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="actions">
      <button class="btn primary" type="submit" [disabled]="!f.form.valid">
        Save
      </button>
    </div> -->
    <!-- Ensure all opened divs are closed before closing the form -->
  </form>
</div>
